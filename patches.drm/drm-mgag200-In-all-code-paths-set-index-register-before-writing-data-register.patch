From: Takashi Iwai <tiwai@suse.com>
Date: Tue May 7 14:37:46 2013 +0200
Subject: drm/mgag200: In all code paths set index register before writing data register.
Patch-Mainline: to be upstreamed
Git-commit: 8eb44b9064986b6f3b116f3e856c2a604f18ebb3
Git-repo: git://people.freedesktop.org/~airlied/linux/
References: bnc #806990
Signed-off-by: Egbert Eich <eich@suse.com>

Signed-off-by: Egbert Eich <eich@suse.com>
---
 drivers/gpu/drm/mgag200/mgag200_mode.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- linux-3.0-SLE11-SP3.orig/drivers/gpu/drm/mgag200/mgag200_mode.c
+++ linux-3.0-SLE11-SP3/drivers/gpu/drm/mgag200/mgag200_mode.c
@@ -1024,6 +1024,7 @@ static int mga_crtc_mode_set(struct drm_
 
 
 	if (IS_G200_SE(mdev)) {
+		WREG8(0x1fde, 0x06);
 		if (mdev->reg_1e24 >= 0x02) {
 			u8 hi_pri_lvl;
 			u32 bpp;
@@ -1050,7 +1051,6 @@ static int mga_crtc_mode_set(struct drm_
 			else
 				hi_pri_lvl = 5;
 
-			WREG8(0x1fde, 0x06);
 			WREG8(0x1fdf, hi_pri_lvl);
 		} else {
 			if (mdev->reg_1e24 >= 0x01)
